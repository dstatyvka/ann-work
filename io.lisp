(in-package :number-one)

(defun read-file (fname &optional (threshold 0.5))
  (with-image-from-file (*default-image* fname)
    (let ((w (float (image-width)))
	  (h (float (image-height)))
	  xs ys)
      (do-intensities (int x y)
	(when (< threshold int)
	  (push (/ x w) xs)
	  (push (/ y h) ys)))
      (list (make-marray 'double-float :initial-contents xs)
	    (make-marray 'double-float :initial-contents ys)))))
